<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">

	<head>
		<title>PdfJs demo page</title>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>

	<body>

		<div wicket:id="pdfJsPanel" class="pdfPanel"></div>

		<div>
			<button id="prev">Previous</button>
			<button id="next">Next</button>
			<button id="zoomIn">Zoom In</button>
			<button id="zoomOut">Zoom Out</button>
			&nbsp; &nbsp;
			<span>Page: <input id="page_num"></input> / <span id="page_count"></span></span>
            <select id="zoom" title="Zoom">
                <option id="pageAutoOption" title="" value="auto" >Automatic Zoom</option>
                <option id="pageActualOption" title="" value="page-actual" >Actual Size</option>
                <option id="pageFitOption" title="" value="page-fit" >Page Fit</option>
                <option id="pageWidthOption" title="" value="page-width">Page Width</option>
                <option  value="0.5">50%</option>
                <option  value="0.75">75%</option>
                <option  value="1">100%</option>
                <option  value="1.25">125%</option>
                <option  value="1.5">150%</option>
                <option  value="2">200%</option>
                <option  value="3">300%</option>
                <option  value="4">400%</option>
            </select>
			<button id="print">Print</button>
		</div>

		<script type="text/javascript">
			$(function () {
			    var canvasId = $('.pdfPanel canvas').attr('id');

				$('#prev').click(function () {
					Wicket.Event.publish(WicketStuff.PDFJS.Topic.PREVIOUS_PAGE, {"canvasId": canvasId});
				});
				$('#next').click(function () {
					Wicket.Event.publish(WicketStuff.PDFJS.Topic.NEXT_PAGE, {"canvasId": canvasId});
				});
				$('#zoomIn').click(function () {
					Wicket.Event.publish(WicketStuff.PDFJS.Topic.ZOOM_IN, {"canvasId": canvasId});
				});
				$('#zoomOut').click(function () {
					Wicket.Event.publish(WicketStuff.PDFJS.Topic.ZOOM_OUT, {"canvasId": canvasId});
				});
				$('#zoom').change(function () {
					var scale = $(this).val();
					Wicket.Event.publish(WicketStuff.PDFJS.Topic.ZOOM_TO, {"canvasId": canvasId, "scale" : scale});
				});
				$('#page_num').change(function () {
					var page = parseInt($(this).val());
					Wicket.Event.publish(WicketStuff.PDFJS.Topic.GOTO_PAGE, {"canvasId": canvasId, "page" : page});
				});
				$('#print').click(function () {
					Wicket.Event.publish(WicketStuff.PDFJS.Topic.PRINT, {"canvasId": canvasId});
				});
                Wicket.Event.subscribe(WicketStuff.PDFJS.Topic.CURRENT_PAGE, function (jqEvent, pageNumber, data) {
                    $('#'+data.canvasId).closest('.pdfPanel').siblings().find('#page_num').val(pageNumber);
                });
				Wicket.Event.subscribe(WicketStuff.PDFJS.Topic.TOTAL_PAGES, function (jqEvent, total, data) {
					$('#'+data.canvasId).closest('.pdfPanel').siblings().find('#page_count').text(total);
				});
				Wicket.Event.subscribe(WicketStuff.PDFJS.Topic.CURRENT_ZOOM, function (jqEvent, zoom, data) {

				    var zoomDropDown =  $('#'+data.canvasId).closest('.pdfPanel').siblings().find('#zoom');

				    $("option.custom").remove();

				    zoomDropDown.val(zoom);

				    if (!zoomDropDown.val()) {
						// no val set in dropdown therefore zoom not found as option. Add zoom as custom option.
				        var title = Math.floor((zoom * 100)) + "%";
				        var op = "<option selected='selected'  value='" + zoom + "' class='custom'>" + title + "</option>"
				        zoomDropDown.append($(op));
				    }
                });
			});
		</script>

	</body>

</html>
